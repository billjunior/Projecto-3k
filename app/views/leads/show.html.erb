<div class="container-fluid">
  <div class="row mb-4">
    <div class="col">
      <h1><i class="bi bi-person-badge"></i> <%= @lead.name %></h1>
    </div>
    <div class="col-auto">
      <% unless @lead.converted? %>
        <%= link_to convert_to_customer_lead_path(@lead), data: { turbo_method: :post, turbo_confirm: 'Converter este lead em cliente?' }, class: 'btn btn-success' do %>
          <i class="bi bi-arrow-right-circle"></i> Converter em Cliente
        <% end %>
      <% end %>
      <%= link_to edit_lead_path(@lead), class: 'btn btn-warning' do %>
        <i class="bi bi-pencil"></i> Editar
      <% end %>
      <%= link_to @lead, data: { turbo_method: :delete, turbo_confirm: 'Tem a certeza?' }, class: 'btn btn-danger' do %>
        <i class="bi bi-trash"></i> Eliminar
      <% end %>
    </div>
  </div>

  <div class="row">
    <div class="col-md-6">
      <div class="card">
        <div class="card-header bg-light">
          <h5 class="mb-0">Informações</h5>
        </div>
        <div class="card-body">
          <dl class="row">
            <dt class="col-sm-4">Nome:</dt>
            <dd class="col-sm-8"><%= @lead.name %></dd>

            <dt class="col-sm-4">Empresa:</dt>
            <dd class="col-sm-8"><%= @lead.company %></dd>

            <dt class="col-sm-4">Email:</dt>
            <dd class="col-sm-8"><%= @lead.email %></dd>

            <dt class="col-sm-4">Telefone:</dt>
            <dd class="col-sm-8"><%= phone_link(@lead.phone) if @lead.phone.present? %></dd>

            <dt class="col-sm-4">Fonte:</dt>
            <dd class="col-sm-8"><%= @lead.source %></dd>

            <dt class="col-sm-4">Classificação:</dt>
            <dd class="col-sm-8">
              <span class="badge bg-<%= @lead.classification == 'hot' ? 'danger' : @lead.classification == 'warm' ? 'warning' : 'info' %>">
                <%= @lead.classification.capitalize %>
              </span>
            </dd>

            <dt class="col-sm-4">Responsável:</dt>
            <dd class="col-sm-8"><%= @lead.assigned_to_user&.name || 'Não atribuído' %></dd>

            <dt class="col-sm-4">Estado:</dt>
            <dd class="col-sm-8">
              <% if @lead.converted? %>
                <span class="badge bg-success">Convertido</span><br>
                <small>Em <%= @lead.converted_at.strftime('%d/%m/%Y') %></small>
              <% else %>
                <span class="badge bg-secondary">Ativo</span>
              <% end %>
            </dd>

            <% if @lead.notes.present? %>
              <dt class="col-sm-12 mt-3">Notas:</dt>
              <dd class="col-sm-12"><%= simple_format(@lead.notes) %></dd>
            <% end %>
          </dl>
        </div>
      </div>
    </div>
  </div>
</div>
