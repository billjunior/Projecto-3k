<%= form_with(model: training_course, local: true, class: 'needs-validation', novalidate: true) do |f| %>
  <% if training_course.errors.any? %>
    <div class="alert alert-danger">
      <h5><%= pluralize(training_course.errors.count, "erro") %> impediram o registo:</h5>
      <ul class="mb-0">
        <% training_course.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="row">
    <div class="col-md-6">
      <div class="mb-3">
        <%= f.label :student_name, 'Nome do Formando', class: 'form-label' %>
        <%= f.text_field :student_name, class: 'form-control', required: true,
            placeholder: 'Nome completo do formando' %>
      </div>
    </div>

    <div class="col-md-6">
      <div class="mb-3">
        <%= f.label :module_name, 'Módulo/Curso', class: 'form-label' %>
        <%= f.text_field :module_name, class: 'form-control', required: true,
            placeholder: 'Ex: Word Avançado, Excel, Photoshop, etc' %>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
      <div class="mb-3">
        <%= f.label :start_date, 'Data de Início', class: 'form-label' %>
        <%= f.date_field :start_date, class: 'form-control', required: true %>
      </div>
    </div>

    <div class="col-md-3">
      <div class="mb-3">
        <%= f.label :end_date, 'Data de Fim', class: 'form-label' %>
        <%= f.date_field :end_date, class: 'form-control' %>
      </div>
    </div>

    <div class="col-md-3">
      <div class="mb-3">
        <%= f.label :training_days, 'Dias de Formação', class: 'form-label' %>
        <%= f.number_field :training_days, class: 'form-control', step: 1, min: 1,
            placeholder: '0' %>
      </div>
    </div>

    <div class="col-md-3">
      <div class="mb-3">
        <%= f.label :status, 'Estado', class: 'form-label' %>
        <%= f.select :status,
            options_for_select([['Activo', 'active'], ['Concluído', 'completed'], ['Cancelado', 'cancelled']],
            training_course.status),
            {},
            { class: 'form-select' } %>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-4">
      <div class="mb-3">
        <%= f.label :total_value, 'Valor Total do Curso', class: 'form-label' %>
        <div class="input-group">
          <span class="input-group-text">AOA</span>
          <%= f.number_field :total_value, class: 'form-control', step: '0.01', min: 0,
              placeholder: '0,00' %>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="mb-3">
        <%= f.label :amount_paid, 'Valor Pago', class: 'form-label' %>
        <div class="input-group">
          <span class="input-group-text">AOA</span>
          <%= f.number_field :amount_paid, class: 'form-control', step: '0.01', min: 0,
              placeholder: '0,00' %>
        </div>
        <small class="text-muted">Valor já recebido</small>
      </div>
    </div>

    <div class="col-md-4">
      <div class="mb-3">
        <%= f.label :payment_type, 'Tipo de Pagamento', class: 'form-label' %>
        <%= f.select :payment_type,
            options_for_select([['Manual', 'manual'], ['Transferência Bancária', 'bank_transfer']],
            training_course.payment_type),
            {},
            { class: 'form-select', required: true } %>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <div class="mb-3">
        <%= f.label :notes, 'Notas/Observações', class: 'form-label' %>
        <%= f.text_area :notes, class: 'form-control', rows: 3,
            placeholder: 'Informações adicionais sobre o curso (opcional)' %>
      </div>
    </div>
  </div>

  <div class="d-flex justify-content-between">
    <%= link_to 'Cancelar', training_courses_path, class: 'btn btn-secondary' %>
    <%= f.submit 'Guardar Curso', class: 'btn btn-primary' %>
  </div>
<% end %>
